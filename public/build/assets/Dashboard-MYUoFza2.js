import{p as g,z as S,D as I,E as D,g as c,a as m,b as v,h as P,w as p,d as e,t as s,n as x,o as l,f as h,j as U,G as V,F as j,H as E,l as _,c as C,i as N,I as F}from"./app-Bdlj_eyr.js";import{_ as M}from"./AuthenticatedLayout-CIGqCVN-.js";import{C as O}from"./push-notifications-esm-sh-2jhhL.js";/* empty css            */import"./ApplicationLogo-dDGJ2aGZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mx-auto mb-10 max-w-7xl sm:px-6 lg:px-8"},z={class:"bg-white shadow rounded p-6 flex items-center justify-between"},A={class:"text-gray-500 text-sm"},G={class:"text-right"},K={class:"text-3xl font-bold"},$={key:0},q={key:1},J={class:"bg-white shadow rounded p-6 flex items-center justify-between"},Q={class:"text-gray-500 text-sm"},R={class:"text-right"},W={class:"text-3xl font-bold"},X={key:0},Z={key:1},ee={class:"my-12"},te={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},se={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},ae={class:"p-6 text-gray-900"},ne={class:"mb-4 text-sm text-gray-600"},oe={class:"mb-4"},re={class:"mb-4 text-sm text-gray-600"},le={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},de={class:"text-lg font-semibold"},ie={class:"text-gray-600"},ce={class:"text-gray-700"},ue={class:"text-gray-500"},ge={class:"flex justify-between items-center mt-6"},pe={class:"text-sm text-gray-600"},ye={__name:"Dashboard",props:{tradedStocks:Object,filters:Object,nifty:Object,niftybank:Object},setup(B){const y=new O({instanceId:"becc7936-b48d-4ce6-8c1f-eb84f793b4fc"}),o=B;y.start().then(()=>y.addDeviceInterest("hello")).then(()=>console.log("Successfully registered and subscribed!")).catch(console.error);const T=r=>r?new Date(r).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",f=g(o.filters.search||""),b=g(T(o.tradedStocks.data?.[0]?.timestamp)),n=g(o.tradedStocks);S(()=>{const r=setInterval(async()=>{const t=new Date;if(t.getHours()>15||t.getHours()===15&&t.getMinutes()>=45){clearInterval(r);return}await I.get("/trigger-traded-stocks-event",{params:{page:n.value.current_page,search:f.value}})},1e4);window.Echo.channel("traded-stocks").listen(".traded-stocks.updated",t=>{n.value=t.data.tradedStocks,b.value=t.timestamp}),D(()=>clearInterval(r))});const H=()=>{F.get("/dashboard",{search:f.value},{preserveState:!0,onSuccess:r=>{n.value=r.props.tradedStocks}})};function w(r,t,a,L){const k=setInterval(async()=>{const u=new Date;if(u.getHours()>15||u.getHours()===15&&u.getMinutes()>=45){clearInterval(k);return}await I.get(a)},4e3);window.Echo.channel(r).listen(t,u=>{L.value=u}),D(()=>clearInterval(k))}const d=g({price:o.nifty?.price,change:o.nifty?.change,percent:o.nifty?.percent,lastupd:o.nifty?.lastupd}),i=g({price:o.niftybank?.price,change:o.niftybank?.change,percent:o.niftybank?.percent,lastupd:o.niftybank?.lastupd});return S(()=>{w("update-nifty50",".update-nifty50","/trigger-nifty50-event",d),w("update-niftybank",".update-niftybank","/trigger-niftybank-event",i)}),(r,t)=>(l(),c(j,null,[m(v(P),{title:"Dashboard"}),m(M,null,{header:p(()=>[...t[1]||(t[1]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Dashboard ",-1)])]),default:p(()=>[t[8]||(t[8]=e("div",{class:"py-12"},[e("div",{class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},[e("div",{class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},[e("div",{class:"p-6 text-gray-900"}," You're logged in! ")])])],-1)),e("div",Y,[e("div",z,[e("div",null,[t[2]||(t[2]=e("h2",{class:"text-xl font-bold"},"NIFTY 50",-1)),e("p",A,"Last Updated: "+s(d.value.lastupd),1)]),e("div",G,[e("p",K,s(d.value.price),1),e("p",{class:x([d.value.change>=0?"text-green-600":"text-red-600","text-lg font-semibold flex items-center justify-end"])},[d.value.change>=0?(l(),c("span",$,"▲")):(l(),c("span",q,"▼")),h(" "+s(d.value.change)+" ("+s(d.value.percent)+"%) ",1)],2)])]),e("div",J,[e("div",null,[t[3]||(t[3]=e("h2",{class:"text-xl font-bold"},"NIFTY BANK",-1)),e("p",Q,"Last Updated: "+s(i.value.lastupd),1)]),e("div",R,[e("p",W,s(i.value.price),1),e("p",{class:x([i.value.change>=0?"text-green-600":"text-red-600","text-lg font-semibold flex items-center justify-end"])},[i.value.change>=0?(l(),c("span",X,"▲")):(l(),c("span",Z,"▼")),h(" "+s(i.value.change)+" ("+s(i.value.percent)+"%) ",1)],2)])])]),e("div",ee,[e("div",te,[e("div",se,[e("div",ae,[t[7]||(t[7]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 mb-4"},"Traded Stocks",-1)),e("div",ne," Updated at: "+s(b.value),1),e("div",null,[e("div",oe,[U(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>f.value=a),onInput:H,type:"text",placeholder:"Search stocks...",class:"border rounded px-3 py-2 w-full"},null,544),[[V,f.value]])]),e("div",re," Showing "+s(n.value.from)+"–"+s(n.value.to)+" of "+s(n.value.total)+" stocks ",1),e("div",le,[(l(!0),c(j,null,E(n.value.data,a=>(l(),c("div",{key:a.identifier,class:"bg-white shadow rounded p-4"},[m(v(_),{href:r.route("stock-view",a.symbol)},{default:p(()=>[e("h3",de,s(a.symbol),1),e("p",ie,"Last Price: ₹ "+s(a.lastPrice),1),e("p",{class:x({"text-green-600 font-bold":a.pchange>0,"text-red-600 font-bold":a.pchange<0,"text-gray-600":a.pchange===0})},s(a.pchange)+" % ",3),e("p",ce,[t[4]||(t[4]=h("Change: ",-1)),e("span",{class:x({"text-green-600 font-bold":a.change>0,"text-red-600 font-bold":a.change<0,"text-gray-600":a.change===0})},s(a.change),3)]),e("p",ue,"Previous Close: ₹ "+s(a.previousClose),1)]),_:2},1032,["href"])]))),128))]),e("div",ge,[n.value.prev_page_url?(l(),C(v(_),{key:0,href:n.value.prev_page_url,class:"px-4 py-2 bg-gray-200 rounded"},{default:p(()=>[...t[5]||(t[5]=[h(" Previous ",-1)])]),_:1},8,["href"])):N("",!0),e("span",pe," Page "+s(n.value.current_page)+" of "+s(n.value.last_page),1),n.value.next_page_url?(l(),C(v(_),{key:1,href:n.value.next_page_url,class:"px-4 py-2 bg-gray-200 rounded"},{default:p(()=>[...t[6]||(t[6]=[h(" Next ",-1)])]),_:1},8,["href"])):N("",!0)])])])])])])]),_:1})],64))}};export{ye as default};
