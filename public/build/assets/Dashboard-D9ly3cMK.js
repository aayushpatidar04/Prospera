import{r as f,o as j,I as S,a as C,c,b as h,u as g,h as H,w as u,d as e,t as s,n as y,f as l,i as x,x as v,e as P,J as U,F as I,g as V,l as D,p as N,j as F}from"./app-CjmAPzr6.js";import{_ as O}from"./AuthenticatedLayout-Cb5D_JPh.js";import{C as E}from"./push-notifications-esm-sh-2jhhL.js";/* empty css            */import"./ApplicationLogo-DZVX4enR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mx-auto mb-10 max-w-7xl sm:px-6 lg:px-8"},z={class:"bg-white shadow rounded p-6 flex items-center justify-between"},A={class:"text-gray-500 text-sm"},G={class:"text-right"},J={class:"text-3xl font-bold"},K={key:0},W={key:1},$={class:"bg-white shadow rounded p-6 flex items-center justify-between"},q={class:"text-gray-500 text-sm"},Q={class:"text-right"},R={class:"text-3xl font-bold"},X={key:0},Z={key:1},ee={class:"bg-white shadow rounded p-6 flex items-center justify-between"},te={class:"bg-white shadow rounded p-6 flex items-center justify-between"},se={class:"my-12"},ae={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},ne={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},oe={class:"p-6 text-gray-900"},re={class:"mb-4 text-sm text-gray-600"},le={class:"mb-4"},de={class:"mb-4 text-sm text-gray-600"},ie={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},ce={class:"text-lg font-semibold"},ue={class:"text-gray-600"},ge={class:"text-gray-700"},pe={class:"text-gray-500"},fe={class:"flex justify-between items-center mt-6"},he={class:"text-sm text-gray-600"},_e={__name:"Dashboard",props:{tradedStocks:Object,filters:Object,nifty:Object,niftybank:Object},setup(B){const b=new E({instanceId:"becc7936-b48d-4ce6-8c1f-eb84f793b4fc"}),r=B;b.start().then(()=>b.addDeviceInterest("hello")).then(()=>console.log("Successfully registered and subscribed!")).catch(console.error);const L=o=>o?new Date(o).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",m=f(r.filters.search||""),w=f(L(r.tradedStocks.data?.[0]?.timestamp)),n=f(r.tradedStocks);j(()=>{const o=setInterval(async()=>{const t=new Date;if(t.getHours()>15||t.getHours()===15&&t.getMinutes()>=45){clearInterval(o);return}await S.get("/trigger-traded-stocks-event",{params:{page:n.value.current_page,search:m.value}})},1e4);window.Echo.channel("traded-stocks").listen(".traded-stocks.updated",t=>{n.value=t.data.tradedStocks,w.value=t.timestamp}),C(()=>clearInterval(o))});const T=()=>{F.get("/dashboard",{search:m.value},{preserveState:!0,onSuccess:o=>{n.value=o.props.tradedStocks}})};function _(o,t,a,M){const k=setInterval(async()=>{const p=new Date;if(p.getHours()>15||p.getHours()===15&&p.getMinutes()>=45){clearInterval(k);return}await S.get(a)},4e3);window.Echo.channel(o).listen(t,p=>{M.value=p}),C(()=>clearInterval(k))}const d=f({price:r.nifty?.price,change:r.nifty?.change,percent:r.nifty?.percent,lastupd:r.nifty?.lastupd}),i=f({price:r.niftybank?.price,change:r.niftybank?.change,percent:r.niftybank?.percent,lastupd:r.niftybank?.lastupd});return j(()=>{_("update-nifty50",".update-nifty50","/trigger-nifty50-event",d),_("update-niftybank",".update-niftybank","/trigger-niftybank-event",i)}),(o,t)=>(l(),c(I,null,[h(g(H),{title:"Dashboard"}),h(O,null,{header:u(()=>[...t[1]||(t[1]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Dashboard ",-1)])]),default:u(()=>[t[12]||(t[12]=e("div",{class:"py-12"},[e("div",{class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},[e("div",{class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},[e("div",{class:"p-6 text-gray-900"}," You're logged in! ")])])],-1)),e("div",Y,[e("div",z,[e("div",null,[t[2]||(t[2]=e("h2",{class:"text-xl font-bold"},"NIFTY 50",-1)),e("p",A,"Last Updated: "+s(d.value.lastupd),1)]),e("div",G,[e("p",J,s(d.value.price),1),e("p",{class:y([d.value.change>=0?"text-green-600":"text-red-600","text-lg font-semibold flex items-center justify-end"])},[d.value.change>=0?(l(),c("span",K,"▲")):(l(),c("span",W,"▼")),x(" "+s(d.value.change)+" ("+s(d.value.percent)+"%) ",1)],2)])]),e("div",$,[e("div",null,[t[3]||(t[3]=e("h2",{class:"text-xl font-bold"},"NIFTY BANK",-1)),e("p",q,"Last Updated: "+s(i.value.lastupd),1)]),e("div",Q,[e("p",R,s(i.value.price),1),e("p",{class:y([i.value.change>=0?"text-green-600":"text-red-600","text-lg font-semibold flex items-center justify-end"])},[i.value.change>=0?(l(),c("span",X,"▲")):(l(),c("span",Z,"▼")),x(" "+s(i.value.change)+" ("+s(i.value.percent)+"%) ",1)],2)])]),e("div",ee,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-bold"},"Top 20 Gainers / Loosers")],-1)),h(g(v),{href:o.route("top20")},{default:u(()=>[...t[4]||(t[4]=[e("div",{class:"flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 8l4 4-4 4"})])],-1)])]),_:1},8,["href"])]),e("div",te,[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-2xl font-bold"},"52 Week High - Low")],-1)),h(g(v),{href:o.route("52week")},{default:u(()=>[...t[6]||(t[6]=[e("div",{class:"flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 8l4 4-4 4"})])],-1)])]),_:1},8,["href"])])]),e("div",se,[e("div",ae,[e("div",ne,[e("div",oe,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 mb-4"},"Traded Stocks",-1)),e("div",re," Updated at: "+s(w.value),1),e("div",null,[e("div",le,[P(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=a),onInput:T,type:"text",placeholder:"Search stocks...",class:"border rounded px-3 py-2 w-full"},null,544),[[U,m.value]])]),e("div",de," Showing "+s(n.value.from)+"–"+s(n.value.to)+" of "+s(n.value.total)+" stocks ",1),e("div",ie,[(l(!0),c(I,null,V(n.value.data,a=>(l(),c("div",{key:a.identifier,class:"bg-white shadow rounded p-4"},[h(g(v),{href:o.route("stock-view",a.symbol)},{default:u(()=>[e("h3",ce,s(a.symbol),1),e("p",ue,"Last Price: ₹ "+s(a.lastPrice),1),e("p",{class:y({"text-green-600 font-bold":a.pchange>0,"text-red-600 font-bold":a.pchange<0,"text-gray-600":a.pchange===0})},s(a.pchange)+" % ",3),e("p",ge,[t[8]||(t[8]=x("Change: ",-1)),e("span",{class:y({"text-green-600 font-bold":a.change>0,"text-red-600 font-bold":a.change<0,"text-gray-600":a.change===0})},s(a.change),3)]),e("p",pe,"Previous Close: ₹ "+s(a.previousClose),1)]),_:2},1032,["href"])]))),128))]),e("div",fe,[n.value.prev_page_url?(l(),D(g(v),{key:0,href:n.value.prev_page_url,class:"px-4 py-2 bg-gray-200 rounded"},{default:u(()=>[...t[9]||(t[9]=[x(" Previous ",-1)])]),_:1},8,["href"])):N("",!0),e("span",he," Page "+s(n.value.current_page)+" of "+s(n.value.last_page),1),n.value.next_page_url?(l(),D(g(v),{key:1,href:n.value.next_page_url,class:"px-4 py-2 bg-gray-200 rounded"},{default:u(()=>[...t[10]||(t[10]=[x(" Next ",-1)])]),_:1},8,["href"])):N("",!0)])])])])])])]),_:1})],64))}};export{_e as default};
